<header class="main-header">
    <div class="header-container">
        <div class="logo">
            <h1><a href="/<%= lang === 'id' ? 'id/beranda' : 'en/home' %>">KiraX</a></h1>
        </div>

        <nav class="main-nav">
            <ul>
                <li><a href="/<%= lang === 'id' ? 'id/beranda' : 'en/home' %>">
                    <%= lang === 'id' ? 'Beranda' : 'Home' %>
                </a></li>
                <li><a href="/<%= lang === 'id' ? 'id/tutorial' : 'en/tutorial' %>">
                    <%= lang === 'id' ? 'Tutorial' : 'Tutorial' %>
                </a></li>
                <li><a href="/<%= lang === 'id' ? 'id/tukarkeahlian' : 'en/skill-exchange' %>">
                    <%= lang === 'id' ? 'Tukar Keahlian' : 'Skill Exchange' %>
                </a></li>
                <li><a href="/<%= lang === 'id' ? 'id/tentangkami' : 'en/about' %>">
                    <%= lang === 'id' ? 'Tentang Kami' : 'About Us' %>
                </a></li>
            </ul>
        </nav>

        <div class="user-controls">
            <% if (isAuthenticated) { %>
                <a href="/<%= lang === 'id' ? 'id/dashboard' : 'en/dashboard' %>" class="btn-dashboard">
                    ðŸ‘‹ <%= currentUser.username %> 
                </a>
                <a href="/<%= lang === 'id' ? 'id/keluar' : 'en/logout' %>" class="btn-logout">
                    <%= lang === 'id' ? 'Keluar' : 'Logout' %>
                </a>
            <% } else { %>
                <a href="/<%= lang === 'id' ? 'id/gabung' : 'en/join' %>" class="btn-join">
                    <%= lang === 'id' ? 'Masuk / Daftar' : 'Login / Register' %>
                </a>
            <% } %>

            <button id="lang-switch" class="btn-lang" onclick="switchLanguage()">
                <%= lang === 'id' ? 'ðŸ‡ºðŸ‡¸ English' : 'ðŸ‡®ðŸ‡© Indonesia' %>
            </button>
        </div>
    </div>
</header>

<script>
function switchLanguage() {
    const currentLang = '<%= lang %>';
    const newLang = currentLang === 'id' ? 'en' : 'id';
    const currentPath = window.location.pathname;
    
    // Map dari path lama ke path baru
    const pathMap = {
        // Indonesian to English
        '/id/beranda': '/en/home',
        '/id/gabung': '/en/join',
        '/id/dashboard': '/en/dashboard',
        '/id/tukarkeahlian': '/en/skill-exchange',
        '/id/tutorial': '/en/tutorial',
        '/id/tentangkami': '/en/about',
        '/id/keluar': '/en/logout',
        '/id/buat-listing': '/en/create-listing',
        // English to Indonesian
        '/en/home': '/id/beranda',
        '/en/join': '/id/gabung',
        '/en/dashboard': '/id/dashboard',
        '/en/skill-exchange': '/id/tukarkeahlian',
        '/en/tutorial': '/id/tutorial',
        '/en/about': '/id/tentangkami',
        '/en/logout': '/id/keluar',
        '/en/create-listing': '/id/buat-listing'
    };
    
    // Default ke home jika path tidak ditemukan
    let newPath = pathMap[currentPath] || (newLang === 'id' ? '/id/beranda' : '/en/home');
    
    // Preserve query parameters
    const queryString = window.location.search;
    window.location.href = newPath + queryString;
}
</script>
    </div>
</header>